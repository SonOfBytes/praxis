machine:
  environment:
    GOPATH: "/home/ubuntu/go"
    PATH: "$GOPATH/bin:$PATH"
    PROJECT: "github.com/convox/praxis"
  services:
    - docker

dependencies:
  override:
    - mkdir -p ${GOPATH}/src/${PROJECT}
    - rsync -azC --delete ./ ${GOPATH}/src/${PROJECT}
    - docker build --rm=false -t convox/praxis .

test:
  override:
    - go get ${PROJECT}/cmd/cx
    - cx test
